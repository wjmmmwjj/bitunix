# Bitunix 量化交易機器人

## 專案簡介
本專案是一套自動化的 Bitunix 量化交易機器人，具備自動下單、持倉監控、通道策略判斷、爆倉保護與 Discord 美觀通知等功能，適合用於數位貨幣合約自動交易與風控教學。

## 主要功能特色
- ✅ **Bitunix API 串接**：自動查詢餘額、下單、查持倉，並正確處理簽名驗證。
- ✅ **自動計算下單數量**：根據錢包餘額、槓桿、當前價格自動計算下單數量。
- ✅ **通道策略自動交易**：根據通道上下軌策略自動開多/空單、平倉。
- ✅ **避免重複開倉**：查詢實際持倉狀態，避免重複下單。
- ✅ **Discord 美觀通知**：每次交易、異常、通道變動都會自動發送帶有蠟燭圖、通道線、開倉標註的專業通知。
- ✅ **盈虧與收益率即時顯示**：每則通知自動顯示目前持倉、未實現盈虧與收益率。
- ✅ **勝率統計與本地存儲**：自動統計交易勝率並持久化存儲到本地stats.json文件。
- ✅ **平倉盈虧詳細顯示**：每次平倉後Discord通知會顯示具體的盈虧金額與百分比。
- ✅ **爆倉自動平倉與休息**：當持倉虧損達-100%時自動平倉並休息4小時。


## 安裝與執行方式
1. **安裝 Python**：
   - 前往 [Python 官方網站](https://www.python.org/downloads/)下載 Python 3.8 或以上版本。
   - 安裝完成後，確保在命令提示符中可以使用 `python --version` 查看版本。

2. **創建虛擬環境**：
   ```bash
   python -m venv .venv
   ```
   - 激活虛擬環境：
     - Windows：
       ```bash
       .venv\Scripts\activate
       ```
     - macOS/Linux：
       ```bash
       source .venv/bin/activate
       ```

3. **安裝依賴套件**：
   ```bash
   pip install -r requirements.txt
   ```
   主要依賴：ccxt、requests、mplfinance、discord.py、numpy、pandas、matplotlib

4. **設定 API 金鑰**：
   - 在 `config.py` 內填入你的 Bitunix API Key 與 Secret Key。
   - 設定 Discord Webhook URL。

5. **啟動機器人**：
   ```bash
   python trading_bot.py
   ```
   確保 `config.py` 中的 API Key 和 Webhook URL 已正確配置。

## 主要檔案說明
- `trading_bot.py`：主程式，包含所有交易邏輯、API串接、圖表與通知功能。
- `requirements.txt`：Python 依賴套件清單。

## 注意事項
- **API 金鑰安全**：請勿將 API 金鑰洩漏給他人，避免資金損失。
- **風險警告**：本程式僅供學術與技術交流，實際交易請自行評估風險，勿投入無法承受損失之資金。
- **Discord 通知**：請先建立好 Discord Webhook 並填入正確網址。

## 聯絡/授權
- 作者：wjmmmwjj
- 授權：僅供學術與個人用途，禁止商業轉售。 

## 通道计算方法

在本项目中，我们使用上、中、下轨来帮助判断市场趋势。以下是每个通道的计算方法：

- **上轨**：通过比较当前最低价与前一天最低价来决定是否取过去 N 根 K 线的最高价。
- **下轨**：通过比较当前最高价与前一天最高价来决定是否取过去 N 根 K 线的最低价。
- **中轨**：上轨和下轨的平均值。

## 开仓和平仓条件

开仓和平仓条件根据市场信号和策略逻辑进行判断：

- **开仓条件**：
  - 当收盘价高于上轨时，发出开多单信号。
  - 当收盘价低于下轨时，发出开空单信号。

- **平仓条件**：
  - 当持有多单且當前價格低于中轨时，发出平多单信号。
  - 当持有空单且當前價格高于中轨时，发出平空单信号。

这些条件帮助我们在市场中做出更明智的交易决策。